{% extends 'campaign-manager/settings/_layout' %}
{% import '_includes/forms.twig' as forms %}

{% set title = 'General Settings'|t('campaign-manager') %}
{% set selectedSettingsItem = 'general' %}
{% set fullPageForm = true %}

{% block content %}
    {{ actionInput('campaign-manager/settings/save') }}
    {{ redirectInput('campaign-manager/settings') }}

    {{ forms.textField({
        label: 'Plugin Name'|t('campaign-manager'),
        instructions: 'The display name for this plugin in the control panel.'|t('campaign-manager'),
        id: 'pluginName',
        name: 'settings[pluginName]',
        value: settings.pluginName,
    }) }}

    {{ forms.textField({
        label: 'Default Country Code'|t('campaign-manager'),
        instructions: 'ISO 3166-1 alpha-2 country code for phone number validation (e.g., KW for Kuwait, US for United States).'|t('campaign-manager'),
        id: 'defaultCountryCode',
        name: 'settings[defaultCountryCode]',
        value: settings.defaultCountryCode,
        size: 4,
        maxlength: 2,
    }) }}

    {{ forms.selectField({
        label: 'Log Level'|t('campaign-manager'),
        instructions: 'The minimum log level to record. Debug shows the most detail.'|t('campaign-manager'),
        id: 'logLevel',
        name: 'settings[logLevel]',
        value: settings.logLevel,
        options: [
            { label: 'Debug', value: 'debug' },
            { label: 'Info', value: 'info' },
            { label: 'Warning', value: 'warning' },
            { label: 'Error', value: 'error' },
        ],
    }) }}

    <hr>

    <h2>{{ 'SMS Settings'|t('campaign-manager') }}</h2>

    {% set senderIdOptions = craft.campaignManager.sms.getSenderIdOptions() %}
    {{ forms.selectField({
        label: 'Default Sender ID'|t('campaign-manager'),
        instructions: 'The default SMS sender ID to use when sending campaign invitations.'|t('campaign-manager'),
        id: 'defaultSenderIdId',
        name: 'settings[defaultSenderIdId]',
        value: settings.defaultSenderIdId,
        options: senderIdOptions,
    }) }}

    <hr>

    <h2>{{ 'Invitation Settings'|t('campaign-manager') }}</h2>

    {{ forms.textField({
        label: 'Invitation Route'|t('campaign-manager'),
        instructions: 'The route for invitation pages.'|t('campaign-manager'),
        id: 'invitationRoute',
        name: 'settings[invitationRoute]',
        value: settings.invitationRoute,
    }) }}

    {{ forms.textField({
        label: 'Invitation Template'|t('campaign-manager'),
        instructions: 'The template to use for invitation pages (optional).'|t('campaign-manager'),
        id: 'invitationTemplate',
        name: 'settings[invitationTemplate]',
        value: settings.invitationTemplate,
    }) }}
{% endblock %}
